<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>USD to EUR Converter Debug</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
  input, button { width: 100%; padding: 10px; margin-top: 10px; }
  .rate, .result { margin-top: 10px; font-weight: bold; }
  canvas { margin-top: 20px; }
</style>
</head>
<body>

<h2>USD to EUR Converter</h2>

<div class="rate" id="exchangeRate">Loading exchange rate...</div>
<input type="number" id="usd" placeholder="Enter USD amount" />
<button id="convertBtn">Convert</button>
<div class="result" id="result"></div>
<canvas id="rateChart" height="100"></canvas>

<script>
  const CACHE_CURR_RATE_KEY = "usd_eur_current_rate";
  const CACHE_CURR_RATE_DATE_KEY = "usd_eur_current_rate_date";
  let currentRate = null;

  function log(msg) {
    console.log("[DEBUG]", msg);
  }

  function getCachedCurrentRate() {
    const rate = localStorage.getItem(CACHE_CURR_RATE_KEY);
    const rateDate = localStorage.getItem(CACHE_CURR_RATE_DATE_KEY);
    if (rate && rateDate) {
      return { rate: parseFloat(rate), date: rateDate };
    }
    return null;
  }

  async function fetchCurrentRate() {
    log("Fetching current rate from API...");
    try {
      const response = await fetch("https://api.frankfurter.app/latest?from=USD&to=EUR");
      if (!response.ok) throw new Error(`HTTP status ${response.status}`);
      const data = await response.json();
      const rate = data.rat
